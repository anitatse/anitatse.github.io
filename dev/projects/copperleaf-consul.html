<!DOCTYPE html>
<head>
  <title>Consul â€” Anita Tse</title>
  <link rel="icon" href="../images/icons/favicon.png">
  <meta name="viewport" content= "width=device-width, user-scalable=no">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta property="og:title" content="Consul â€” Anita Tse"/>
  <meta property="og:description" content="Anita Tse is an SDE at Amazon Web Services and a UBC Computer Science alumni based in Vancouver, BC."/>
  <meta property="og:image" content="https://anitatse.github.io/dev/images/headshot.jpg"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <link href="https://fonts.googleapis.com/css2?family=Bitter&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Sarabun:300,400,500&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inconsolata&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/navbar.css">
  <link rel="stylesheet" href="../css/items.css">
  <link rel="stylesheet" href="../css/misc.css">
  <script type="text/javascript" src="../js/website.js"></script>
</head>

<body>

  <!-- TOP NAVBAR -->
  <div id="topnav">
    <div class="container" style="padding-top: 0px; padding-bottom: 0px;">
      <!-- hamburger menu for mobile -->
      <a href="javascript:void(0);" class="burger" style="font-size: 24px; float: right; margin: 10px;" onclick="mobileNavBar()">
        <i class="fa fa-bars"></i>
      </a>
      <div id="navitems">
        <div class="nav" id="leftnav" style="float: left;"><a href="../index.html">Anita Tse</a></div>
        <div class="nav"><a href="../docs/AnitaTseResume.pdf">Resume</a></div>
        <div class="nav"><a href="../work.html">Work</a></div>
        <div class="nav"><a href="../about.html">About</a></div>
        <div class="nav"><a href="../index.html">Home</a></div>
      </div>
    </div>
  </div>

  <div style="padding:32px;"></div>

  <div class="container" style="max-width:700px; padding-bottom: 0;">
    <h1 style="text-align: center; margin-bottom: 0;">Architecting a Configuration System at Copperleaf</h1>
    <h4 style="text-align: center;">Terraform â€¢ Ansible â€¢ Docker Compose â€¢ AWS</h4>
    <p style="text-align: center; font-size: 16px;">May 2019</p>
  </div>
  <div class="container">
    <h2>Background</h2>

    <p>In January 2018, I started my first technical internship as a DevOps Engineer Co-op at Copperleaf Technologies in Vancouver, BC. Copperleaf's speciality in Decision Analytics solutions has given us clients around the world and naturally, there are many servers we need to manage and keep backups for. We needed an internal tool to keep our configuration information in the same place and to grab the correct data when needed in a streamlined way.
      <br><br>
During my work term, I architected and implemented the Consul configuration system as an internal tool used by devs across the company.
    </p>
    <img class="article-image" src="../images/consul/consul-logo.png">

    <h3>Service-based Networking and Dynamic Configuration
    </h3>
    <p>
      Consul is a Service Discovery and Configuration tool provided by Hashicorp that provides service-based rather than host-based networking. Allowing network connections to be made directly to services (ex. SQL, Apache, nginx) removes the need for attention to be made towards IP addresses and hostnames where those services are running on. Applications can effortlessly connect to and update/retrieve configuration information stored in Consul's Key-value store in order to run their services.
    </p>

    <img class="article-image" src="../images/consul/consul-ui.jpg">

    <h2>Challenges</h2>

    <p>
      As the system was meant to be used and depended on by many servers across the company, we had to ensure the system was was intuitive, secure, and highly available. Walking into this internship with no knowledge of the DevOps, this project required me to learn about and utilize a wide array of DevOps tools and technologies.
    </p>

    <h2>The tech stack</h2>

    <h3>Amazon Web Services (AWS)</h3>
    <img class="article-image" src="../images/consul/aws.png">
    <p>
      Many components of AWS were utilized to set up this project including: Elastic Compute Cloud (EC2) servers to run the Consul hosts, while dynamically creating security groups to ensure the appropriate ports are opened for communication between the Consul servers and within the office's subnets.
      <br><br>
To ensure data persistence and security, Amazon Elastic Block Store (EBS) Volumes are attached for persistent storage, and snapshot backups are taken nightly and stored in a Simple Storage Service (S3) bucket. DNS entries for the servers were created with Amazon Route 53, which was then placed in front of a HTTPS/SSL Elastic Load Balancer (ELB) to allow secure traffic to the Consul server. To ensure that Consul data is kept secure, Consul has an Access Control List (ACL) system that generates unique tokens that grant specific permissions to users who supply that token.
    </p>
    <img class="article-image" src="../images/consul/acl.png">

    <h3> Infrastructure and Application Deployment Tools </h3>

    <p>
      Terraform is another Hashicorp tool that allows us to spin an entire fleet of AWS infrastructure from a configuration file (advertised as Infrastructure as Code), including special configurations such as instance tags and volume attachments.
      <br><br>
Ansible is an automation tool that was then used to set up the instances and deploy Dockerized Consul agents, using Ansible's inventory to dynamically join the servers in the initial host setup.
    </p>
    <img class="article-image" src="../images/consul/terraform-ansible.png">

    <h2>Results and future use</h2>

    <p>
      Using DevOps tools, I was able to produce a highly available and fully configured Consul system that could be launched within a couple of minutes. The system is already operating in production, with Jenkins regularly targeting the system to collect data and run backup jobs.
      <br><br>
The architecture and scripts allow for Consul to be easily scaled up and out to a larger fleet of servers spanning multiple regions. The system enables the possibility of other applications in the future, such as directly updating environment variables and rendering templates directly from the Consul UI, and allowing services to automatically connect with each other through Consul.
</p>
  </div>

  <button style="margin-left: auto; margin-right: auto; margin-top: 20px; display:flex;" type="button" onclick="location.href='../work.html#projects';" >Back to Projects</button>

  <!-- FOOTER -->
  <div class="footer">

      <div style="padding: 10px"></div>
      <a href="https://www.linkedin.com/in/anita-tse/">
          <img src="../images/icons/linkedin.png" width=41px class="icon">
      </a>
      <a href="https://medium.com/@anitamtse">
          <img src="../images/icons/medium.png" width=40px class="icon">
      </a>
      <a href="mailto:anitatse@alumni.ubc.ca">
          <img src="../images/icons/email.svg" width=42px class="icon">
      </a>
      <a href="https://github.com/anitatse">
          <img src="../images/icons/github.svg" width=40px class="icon">
      </a>

      <div style="height: 60px; width: 250px; margin-left: auto; margin-right: auto;">
          <p class="footer-text">Â© Built with</p>
          <p class="footer-text" id="heart">ðŸ’•</p>
          <p class="footer-text">by Anita Tse</p>
      </div>
  </div>

</body>
</html>
